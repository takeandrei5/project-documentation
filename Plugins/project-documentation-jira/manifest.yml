modules:
  jira:issuePanel:
    - key: project-documentation-jira-hello-world-panel
      function: main
      title: Project Documentation
      icon: https://developer.atlassian.com/platform/forge/images/icons/issue-panel-icon.svg
  function:
    - key: main
      handler: index.run
      providers:
        auth:
          - auth0
app:
  id: ari:cloud:ecosystem::app/5e9c3521-a639-4588-9028-064f9b9ef412

permissions:
  scopes:
    - read:jira-work
  external:
    fetch:
      backend:
        - 'https://product-documentation.eu.auth0.com'
        - '*'

remotes:
  - key: auth0-apis
    baseUrl: https://product-documentation.eu.auth0.com

providers:
  auth:
    - key: auth0
      name: Auth0
      scopes:
        - 'profile'
        - 'openid'
        - 'email'
        - 'offline_access'
      type: oauth2
      clientId: PS8iYirB92QHs6OWMN7wxmQCgQ48Z9sW
      bearerMethod:
        type: authorization-header
      remotes:
        - auth0-apis
      actions:
        authorization:
          remote: auth0-apis
          path: /authorize
          queryParameters:
            access_type: offline_access
            prompt: consent
        exchange:
          remote: auth0-apis
          path: /oauth/token
        revokeToken:
          remote: auth0-apis
          path: /oauth/revoke
        retrieveProfile:
          remote: auth0-apis
          path: /userinfo
          resolvers:
            id: sub
            displayName: name
            avatarUrl: picture